# ==============================================================
# 4ë‹¨ê³„: ì‹¤ì œ ì›¹ì‚¬ì´íŠ¸ ìŠ¤í¬ë˜í•‘ ì‹¤ìŠµ ğŸ¯
# ==============================================================
# 
# ğŸ¯ ì´ íŒŒì¼ì—ì„œ ë°°ìš¸ ë‚´ìš©:
#    - ì‹¤ì œ ì›¹ì‚¬ì´íŠ¸(quotes.toscrape.com)ì—ì„œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
#    - ëª…ì–¸(Quote)ê³¼ ë§í•œ ì‚¬ëŒ(Author) ì •ë³´ ì¶”ì¶œí•˜ê¸°
#    - ì—¬ëŸ¬ ê°œì˜ ë°ì´í„° í•œêº¼ë²ˆì— ê°€ì ¸ì˜¤ê¸°
#
# ==============================================================

import requests
from bs4 import BeautifulSoup

# --------------------------------------------------------------
# ğŸŒ 1. ì›¹ì‚¬ì´íŠ¸ ì ‘ì†í•˜ê¸°
# --------------------------------------------------------------
# ìŠ¤í¬ë˜í•‘ ì—°ìŠµìš© ì‚¬ì´íŠ¸: http://quotes.toscrape.com/
# ì´ ì‚¬ì´íŠ¸ëŠ” ëª…ì–¸ë“¤ì„ ëª¨ì•„ë†“ì€ ê°„ë‹¨í•œ ì‚¬ì´íŠ¸ì…ë‹ˆë‹¤.
url = "http://quotes.toscrape.com/"

print(f"ğŸŒ ì‚¬ì´íŠ¸ì— ì ‘ì† ì¤‘... ({url})")
response = requests.get(url)

# ì ‘ì† ì„±ê³µ ì—¬ë¶€ í™•ì¸
if response.status_code == 200:
    print("âœ… ì ‘ì† ì„±ê³µ!")
else:
    print(f"âŒ ì ‘ì† ì‹¤íŒ¨ (ìƒíƒœ ì½”ë“œ: {response.status_code})")
    # ì ‘ì† ì‹¤íŒ¨í•˜ë©´ í”„ë¡œê·¸ë¨ ì¢…ë£Œ
    exit()

# --------------------------------------------------------------
# ğŸ¥£ 2. HTML ë¶„ì„ ì¤€ë¹„ (Soup ë§Œë“¤ê¸°)
# --------------------------------------------------------------
soup = BeautifulSoup(response.text, "html.parser")
print(soup.prettify()[:500])

# --------------------------------------------------------------
# ğŸ” 3. ë°ì´í„° ì°¾ê¸° ë° ì¶”ì¶œí•˜ê¸°
# --------------------------------------------------------------
# ëª©í‘œ: í™”ë©´ì— ë³´ì´ëŠ” ëª¨ë“  ëª…ì–¸ ë°•ìŠ¤ ì°¾ê¸°
# 
# [HINT] ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬(F12)ë¡œ í™•ì¸í•´ë³´ë©´:
# ê° ëª…ì–¸ì€ <div class="quote"> íƒœê·¸ ì•ˆì— ë“¤ì–´ìˆìŠµë‹ˆë‹¤.

print("\nğŸ” ëª…ì–¸ ë°•ìŠ¤ë“¤ì„ ì°¾ëŠ” ì¤‘...")
quote_boxes = soup.find_all("div", class_="quote")
# print(quote_boxes)
print(f"ì´ {len(quote_boxes)}ê°œì˜ ëª…ì–¸ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤!\n")

print("=" * 60)
print("ğŸ“ ì˜¤ëŠ˜ì˜ ëª…ì–¸ ëª©ë¡")
print("=" * 60)

# ë°˜ë³µë¬¸ìœ¼ë¡œ í•˜ë‚˜ì”© ì •ë³´ êº¼ë‚´ê¸°
for i, box in enumerate(quote_boxes, 1):
    # 1) ëª…ì–¸ ë‚´ìš© ì°¾ê¸°
    # <span class="text"> ì•ˆì— ëª…ì–¸ì´ ë“¤ì–´ìˆìŒ
    # ì˜ˆ: <span class="text">â€œThe world as we have created it...â€</span>
    text_tag = box.find("span", class_="text")
    quote_text = text_tag.text

    # 2) ë§í•œ ì‚¬ëŒ(Author) ì°¾ê¸°
    # <small class="author"> ì•ˆì— ì´ë¦„ì´ ë“¤ì–´ìˆìŒ
    # ì˜ˆ: <small class="author">Albert Einstein</small>
    author_tag = box.find("small", class_="author")
    author_name = author_tag.text
    
    # 3) ê´€ë ¨ íƒœê·¸(Tags) ì°¾ê¸° (ì‹¬í™”)
    # <div class="tags"> ì•ˆì— <a class="tag"> ë“¤ì´ ë“¤ì–´ìˆìŒ
    tags_div = box.find("div", class_="tags")
    # selectë¡œ ì°¾ìœ¼ë©´ ë” ì‰¬ì›€: .tag í´ë˜ìŠ¤ë¥¼ ê°€ì§„ ëª¨ë“  a íƒœê·¸
    tag_links = tags_div.select("a.tag")
    # ë¦¬ìŠ¤íŠ¸ ì»´í”„ë¦¬í—¨ì…˜(í•œ ì¤„ forë¬¸)ìœ¼ë¡œ í…ìŠ¤íŠ¸ë§Œ ì¶”ì¶œ
    tags = [tag.text for tag in tag_links]

    # ê²°ê³¼ ì¶œë ¥
    print(f"[{i}] {quote_text}")
    print(f"    - ë§í•œ ì‚¬ëŒ: {author_name}")
    print(f"    - ê´€ë ¨ íƒœê·¸: {', '.join(tags)}")
    print("-" * 60)

# --------------------------------------------------------------
# ğŸ‰ ì •ë¦¬
# --------------------------------------------------------------
print("\n" + "=" * 60)
print("ğŸ‰ 4ë‹¨ê³„ ì™„ë£Œ!")
print("=" * 60)
print("""
âœ¨ ì˜¤ëŠ˜ ë°°ìš´ ê²ƒ:
   1. ì‹¤ì œ ì›¹ì‚¬ì´íŠ¸ êµ¬ì¡° íŒŒì•…í•˜ê¸° (ê°œë°œì ë„êµ¬ í™œìš©)
   2. div class="quote" ì²˜ëŸ¼ í° ë©ì–´ë¦¬ë¥¼ ë¨¼ì € ì°¾ê¸°
   3. ê·¸ ì•ˆì—ì„œ ë‹¤ì‹œ span, small ë“± ì„¸ë¶€ ì •ë³´ ì°¾ê¸°
   4. ë°˜ë³µë¬¸(for)ì„ ì¨ì„œ ì—¬ëŸ¬ ë°ì´í„° í•œêº¼ë²ˆì— ì²˜ë¦¬í•˜ê¸°
   
ë‹¤ìŒ ë‹¨ê³„(ë§ˆì§€ë§‰!)ì—ì„œëŠ” ì´ ë°ì´í„°ë¥¼ íŒŒì¼(CSV, JSON)ë¡œ ì €ì¥í•˜ëŠ” ë²•ì„ ë°°ì›Œìš”!
""")
