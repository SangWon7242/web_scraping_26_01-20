# ==============================================================
# 3ë‹¨ê³„: ì›í•˜ëŠ” ë°ì´í„° ì°¾ê¸° (BeautifulSoup)
# ==============================================================
# 
# ğŸ¯ ì´ íŒŒì¼ì—ì„œ ë°°ìš¸ ë‚´ìš©:
#    - BeautifulSoup ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©ë²•
#    - HTMLì—ì„œ ì›í•˜ëŠ” íƒœê·¸ ì°¾ê¸° (find, find_all)
#    - CSS ì„ íƒìë¡œ ì°¾ê¸° (select_one, select)
#    - íƒœê·¸ ì•ˆì˜ ê¸€ìì™€ ì†ì„± ê°€ì ¸ì˜¤ê¸°
#
# ==============================================================

# --------------------------------------------------------------
# ğŸ“š ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¶ˆëŸ¬ì˜¤ê¸°
# --------------------------------------------------------------
# pip install beautifulsoup4 ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.
from bs4 import BeautifulSoup

# --------------------------------------------------------------
# ğŸ¥£ BeautifulSoup ìš”ë¦¬ ì¤€ë¹„í•˜ê¸°
# --------------------------------------------------------------
# ì—°ìŠµìš© HTML (ì‹¤ì œ ì›¹ì‚¬ì´íŠ¸ ëŒ€ì‹  ì‚¬ìš©)
html_doc = """
<html>
<head>
    <title>íŒŒì´ì¬ ìŠ¤í¬ë˜í•‘ ì—°ìŠµ</title>
</head>
<body>
    <div id="main">
        <h1>ìŠ¤í¬ë˜í•‘ ì˜ˆì œ</h1>
        <p class="content">ì´ê²ƒì€ ì—°ìŠµìš© ë¬¸ë‹¨ì…ë‹ˆë‹¤.</p>
        
        <ul class="items">
            <li>ì‚¬ê³¼</li>
            <li>ë°”ë‚˜ë‚˜</li>
            <li>ì˜¤ë Œì§€</li>
        </ul>
        
        <a href="https://www.naver.com" class="link">ë„¤ì´ë²„</a>
        <a href="https://www.google.com" class="link">êµ¬ê¸€</a>
    </div>
</body>
</html>
"""

# BeautifulSoup ê°ì²´ ìƒì„± (HTMLì„ ë¶„ì„í•˜ê¸° ì¢‹ê²Œ ë§Œë“¦)
# "html.parser"ëŠ” HTMLì„ í•´ì„í•˜ëŠ” ë„êµ¬ì…ë‹ˆë‹¤.
soup = BeautifulSoup(html_doc, "html.parser")

print("=" * 60)
print("ğŸ¥£ HTML ë¶„ì„ ì¤€ë¹„ ì™„ë£Œ!")
print("=" * 60)
print(soup.prettify())  # HTMLì„ ì˜ˆì˜ê²Œ ì¶œë ¥í•´ë³´ë ¤ë©´ ì£¼ì„ í•´ì œ

# --------------------------------------------------------------
# ğŸ” 1. í•˜ë‚˜ë§Œ ì°¾ê¸°: find()
# --------------------------------------------------------------
# ê°€ì¥ ë¨¼ì € ë‚˜ì˜¤ëŠ” íƒœê·¸ í•˜ë‚˜ë§Œ ì°¾ìŠµë‹ˆë‹¤.

print("\n" + "=" * 60)
print("ğŸ” 1. find() - í•˜ë‚˜ë§Œ ì°¾ê¸°")
print("=" * 60)

# 1) íƒœê·¸ ì´ë¦„ìœ¼ë¡œ ì°¾ê¸°
title_tag = soup.find("title")
print(f"ì œëª© íƒœê·¸: {title_tag}")
print(f"ì œëª© ê¸€ìë§Œ: {title_tag.text}")  # .text : íƒœê·¸ ì•ˆì˜ ê¸€ì ê°€ì ¸ì˜¤ê¸°

# 2) idë¡œ ì°¾ê¸° (idëŠ” í˜ì´ì§€ì— í•˜ë‚˜ë°–ì— ì—†ìœ¼ë¯€ë¡œ ë³´í†µ find ì‚¬ìš©)
main_div = soup.find("div", id="main")
# ë˜ëŠ” soup.find(id="main") ë„ ê°€ëŠ¥
print(main_div.prettify())
print(f"idê°€ mainì¸ div íƒœê·¸ ì•ˆì˜ a: {main_div.a}")
print(f"idê°€ mainì¸ div íƒœê·¸ ì•ˆì˜ a: {main_div.a.text}")
print(f"idê°€ mainì¸ div íƒœê·¸ ì•ˆì˜ h1: {main_div.h1}")
print(f"idê°€ mainì¸ div íƒœê·¸ ì•ˆì˜ h1: {main_div.h1.text}")

# --------------------------------------------------------------
# ğŸ”¢ 2. ì—¬ëŸ¬ ê°œ ì°¾ê¸°: find_all()
# --------------------------------------------------------------
# í•´ë‹¹í•˜ëŠ” ëª¨ë“  íƒœê·¸ë¥¼ ë¦¬ìŠ¤íŠ¸(List) í˜•íƒœë¡œ ê°€ì ¸ì˜µë‹ˆë‹¤.

print("\n" + "=" * 60)
print("ğŸ”¢ 2. find_all() - ì—¬ëŸ¬ ê°œ ì°¾ê¸°")
print("=" * 60)

# 1) ëª¨ë“  <li> íƒœê·¸ ì°¾ê¸°
items = soup.find_all("li")
print(f"ì°¾ì€ í•­ëª© ê°œìˆ˜: {len(items)}")
print(items)

# ë°˜ë³µë¬¸(for)ìœ¼ë¡œ í•˜ë‚˜ì”© êº¼ë‚´ê¸°
print("ëª©ë¡ ë‚´ìš©:")
for item in items:
    print(f" - {item.text}")

# 2) class ì´ë¦„ìœ¼ë¡œ ì°¾ê¸°
links = soup.find_all("a", class_="link")  # ì£¼ì˜: classê°€ ì•„ë‹ˆë¼ class_ (ì˜ˆì•½ì–´ë¼ì„œ)
# ë˜ëŠ” soup.find_all("a", {"class": "link"}) ë„ ê°€ëŠ¥
print(links)

print("\në§í¬ ëª©ë¡:")
for link in links:
    # .textëŠ” ë§í¬ì˜ ì´ë¦„(ê¸€ì), ['href']ëŠ” ì£¼ì†Œ(ì†ì„±)
    name = link.text
    url = link["href"]  # ì†ì„± ê°€ì ¸ì˜¤ê¸°: íƒœê·¸["ì†ì„±ì´ë¦„"]
    print(f" - ì´ë¦„: {name}, ì£¼ì†Œ: {url}")

# --------------------------------------------------------------
# ğŸ¯ 3. CSS ì„ íƒìë¡œ ì°¾ê¸°: select_one(), select()
# --------------------------------------------------------------
# CSS ì„ íƒìë€? ìŠ¤íƒ€ì¼ ê¾¸ë°€ ë•Œ ì“°ëŠ” ë°©ì‹ (ë” ì§ê´€ì ì¼ ìˆ˜ ìˆìŒ)
# #id : id ì°¾ê¸° | #a : aë¼ëŠ” idë¥¼ ê°€ì§„ íƒœê·¸ ê²€ìƒ‰
# .class : class ì°¾ê¸° | .a : aë¼ëŠ” classë¥¼ ê°€ì§„ íƒœê·¸ ê²€ìƒ‰
# íƒœê·¸1 íƒœê·¸2 : íƒœê·¸1 ì•ˆì— ìˆëŠ” íƒœê·¸2 ì°¾ê¸° (í›„ì† ì„ íƒì)
# íƒœê·¸1 > íƒœê·¸2 : íƒœê·¸1 ë°”ë¡œ ì•„ë˜ ìˆëŠ” íƒœê·¸2 ì°¾ê¸° (ìì‹ ì„ íƒì)

print("\n" + "=" * 60)
print("ğŸ¯ 3. select() - CSS ì„ íƒìë¡œ ì°¾ê¸°")
print("=" * 60)

# 1) select_one : í•˜ë‚˜ë§Œ ì°¾ê¸° (findì™€ ë¹„ìŠ·)
# div íƒœê·¸ ì•ˆì˜ h1 ì°¾ê¸°
# div#main > h1 : íƒœê·¸ê°€ divì´ë©´ì„œ idê°€ mainì¸ íƒœê·¸ ì•ˆì— ìˆëŠ” h1 íƒœê·¸ë¥¼ ì°¾ëŠ”ë‹¤.
header = soup.select_one("div#main > h1") 
print(f"ì„ íƒìë¡œ ì°¾ì€ ì œëª©: {header.text}")

# 2) select : ì—¬ëŸ¬ ê°œ ì°¾ê¸° (find_allê³¼ ë¹„ìŠ·)
# classê°€ itemsì¸ ulì˜ ìì‹ìœ¼ë¡œ ìˆëŠ” ëª¨ë“  li ì°¾ê¸°
fruits = soup.select("ul.items > li")
print(fruits)

print("ì„ íƒìë¡œ ì°¾ì€ ê³¼ì¼ë“¤:")
for fruit in fruits:
    print(f" * {fruit.text}")

# --------------------------------------------------------------
# ğŸ‰ ì •ë¦¬
# --------------------------------------------------------------
print("\n" + "=" * 60)
print("ğŸ‰ 3ë‹¨ê³„ ì™„ë£Œ!")
print("=" * 60)
print("""
âœ¨ ì˜¤ëŠ˜ ë°°ìš´ ê²ƒ:
   1. soup = BeautifulSoup(html, "html.parser") : ìš”ë¦¬ ì¤€ë¹„
   2. soup.find("íƒœê·¸") : í•˜ë‚˜ ì°¾ê¸°
   3. soup.find_all("íƒœê·¸") : ëª½ë•… ì°¾ê¸° (ë¦¬ìŠ¤íŠ¸)
   4. select_one("#id"), select(".class") : CSS ì„ íƒìë¡œ ì°¾ê¸°
   5. íƒœê·¸.text : ê¸€ì ê°€ì ¸ì˜¤ê¸°
   6. íƒœê·¸["ì†ì„±"] : ì†ì„± ê°’ ê°€ì ¸ì˜¤ê¸° (ì˜ˆ: ë§í¬ ì£¼ì†Œ)
   
ë‹¤ìŒ ë‹¨ê³„ì—ì„œëŠ” ì‹¤ì œ ì›¹ì‚¬ì´íŠ¸ë¥¼ ìŠ¤í¬ë˜í•‘ í•´ë´ìš”!
""")
